<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SimToC â€” Simulink to C Converter</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600;700&family=Space+Grotesk:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>
<canvas id="bg-canvas"></canvas>

<!-- HEADER -->
<header>
  <div class="logo">
    <span class="logo-icon">âš¡</span>
    <div>
      <div class="logo-title">SimToC</div>
      <div class="logo-sub">Simulink â†’ C Code Converter</div>
    </div>
  </div>
  <div class="status-pill" id="status-pill">
    <span class="status-dot" id="status-dot"></span>
    <span id="status-text">Checking...</span>
  </div>
</header>

<!-- MAIN LAYOUT -->
<main>
  <!-- LEFT PANEL: Upload -->
  <aside class="panel upload-panel">
    <div class="panel-label">UPLOAD FILE</div>

    <div class="drop-zone" id="drop-zone">
      <div class="drop-icon">ğŸ“‚</div>
      <div class="drop-title" id="drop-title">Drop your file here</div>
      <div class="drop-formats">SLX Â· MDL Â· PDF Â· PNG Â· JPG</div>
      <input type="file" id="file-input" accept=".slx,.mdl,.pdf,.png,.jpg,.jpeg,.bmp" hidden>
      <button class="btn-browse" onclick="document.getElementById('file-input').click()">Browse</button>
    </div>

    <div class="file-info" id="file-info" style="display:none">
      <div class="file-name" id="file-name"></div>
      <div class="file-size" id="file-size"></div>
      <button class="btn-clear" onclick="clearFile()">âœ•</button>
    </div>

    <button class="btn-convert" id="btn-convert" onclick="convertFile()" disabled>
      <span id="btn-text">âš¡ Convert to C</span>
    </button>

    <div class="stats-grid" id="stats-grid" style="display:none">
      <div class="stat-box">
        <div class="stat-num" id="stat-blocks">0</div>
        <div class="stat-label">BLOCKS</div>
      </div>
      <div class="stat-box">
        <div class="stat-num" id="stat-conns">0</div>
        <div class="stat-label">CONNECTIONS</div>
      </div>
      <div class="stat-box">
        <div class="stat-num" id="stat-lines">0</div>
        <div class="stat-label">LINES OF C</div>
      </div>
    </div>
  </aside>

  <!-- RIGHT PANEL: Results -->
  <section class="results-panel">

    <!-- DIAGRAM -->
    <div class="panel diagram-panel">
      <div class="panel-header">
        <span class="panel-label">ğŸ”— BLOCK DIAGRAM</span>
        <div class="panel-actions">
          <button class="btn-action" onclick="resetZoom()">Reset View</button>
          <button class="btn-action" onclick="fitDiagram()">Fit All</button>
        </div>
      </div>
      <div class="diagram-container" id="diagram-container">
        <div class="diagram-empty" id="diagram-empty">
          <div class="empty-icon">ğŸ§©</div>
          <div>Block diagram appears here after conversion</div>
        </div>
        <svg id="diagram-svg"></svg>
      </div>
    </div>

    <!-- CODE OUTPUT -->
    <div class="panel code-panel">
      <div class="panel-header">
        <span class="panel-label">ğŸ’¾ GENERATED C CODE</span>
        <div class="panel-actions">
          <button class="btn-action" id="btn-copy" onclick="copyCode()">ğŸ“‹ Copy</button>
          <button class="btn-action btn-download" id="btn-download" onclick="downloadCode()">â¬‡ Download .c</button>
        </div>
      </div>
      <div class="code-empty" id="code-empty">
        <div class="empty-icon">âŒ¨ï¸</div>
        <div>Generated C code appears here</div>
      </div>
      <pre id="code-output" style="display:none"><code class="language-c" id="code-content"></code></pre>
    </div>

  </section>
</main>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script src="script.js"></script>
</body>
</html>